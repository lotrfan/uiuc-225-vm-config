#!/bin/sh
which autocutsel >/dev/null 2>&1
if [ "$?" = "0" ]; then
	autocutsel -fork &
fi
which pulseaudio >/dev/null 2>&1 && pulseaudio --start
which xscreensaver >/dev/null 2>&1 && xscreensaver -no-splash &
which VBoxClient-all >/dev/null 2>&1 && VBoxClient-all &
which xcompmgr >/dev/null 2>&1 && xcompmgr &
if [ -f .xinitrc.start ]; then
	bash .xinitrc.start
fi
WM="$1"
if [ "$WM" = "" ]; then
	WM="xmonad"
elif [ "$WM" = "Xmonad" ]; then
	WM="xmonad"
elif [ "$WM" = "Awesome" ]; then
	WM="awesome"
fi
if [ "$WM" = "awesome" ]; then
	if [ -d ~/.config/wallpaper ]; then
		if [ "`ls ~/.config/wallpaper | wc -l`" -gt "1" ]; then
			sleep 2
			while true; do
				awsetbg -r ~/.config/wallpaper
				sleep 300
			done &
		fi
	fi
	exec awesome
elif [ "$WM" = "xfce4" ]; then
	exec startxfce4
elif [ "$WM" = "xmonad" ]; then
	which hhp >/dev/null 2>&1 && hhp &
	exec xmonad
else
	exec $1
fi
if [ -f .xinitrc.end ]; then
	bash .xinitrc.end
fi
which pulseaudio >/dev/null 2>&1 && pulseaudio --kill &

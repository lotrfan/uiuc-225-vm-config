#!/bin/sh
FILE=`readlink -f $0`
DIR=`dirname $FILE`

#INSTALL ALL SUBMODULES
git submodule update --init --recursive

#INSTALL CONFIGS
CONF="emacs gvimrc vimrc bash_profile bashrc bash_logout zshrc zprofile"
for i in $CONF; do
	rm -f ~/.$i
	ln -sv ${DIR}/base/$i ~/.$i
done

#SETUP ZSH IF POSSIBLE
echo $SHELL | grep zsh >/dev/null 2>&1
if [ "$?" != "0" ]; then
	ZSH=`which zsh 2>/dev/null`
	if [ "$?" = "0" ]; then
		chsh $USER -s $ZSH
		if [ "$?" != "0" ]; then
			rm -fv ~/.bash_profile
			ln -sv ${DIR}/base/bash_profile_zsh ~/.bash_profile
		fi
	fi
fi

#SETUP SSH
if [[ ! -d ~/.ssh || ! -f ~/.ssh/id_rsa ]]; then
	echo "Creating SSH Keys"
	${DIR}/install-ssh-keys
fi
